<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EchoScan Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }
        
        .input-section h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        #textInput {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }
        
        #analyzeBtn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s;
        }
        
        #analyzeBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .results-section {
            display: none;
            margin-top: 30px;
        }
        
        .verdict-display {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .verdict-authentic {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }
        
        .verdict-ambiguous {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }
        
        .verdict-hallucination {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        
        .metric-card h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 1s ease-in-out;
        }
        
        .progress-high { background: linear-gradient(90deg, #27ae60, #2ecc71); }
        .progress-medium { background: linear-gradient(90deg, #f39c12, #e67e22); }
        .progress-low { background: linear-gradient(90deg, #e74c3c, #c0392b); }
        
        .chart-container {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .chart-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .chart-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        
        .loading {
            display: none;
            text-align: center;
            color: #3498db;
            font-size: 1.2em;
            margin: 20px 0;
        }
        
        .loading::after {
            content: '';
            animation: dots 1.5s infinite;
        }
        
        @keyframes dots {
            0% { content: ''; }
            25% { content: '.'; }
            50% { content: '..'; }
            75% { content: '...'; }
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid;
        }
        
        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border-left-color: #ffc107;
        }
        
        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border-left-color: #17a2b8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç EchoScan Dashboard</h1>
            <p>Mathematical Authenticity Validation with Enhanced Transparency</p>
        </div>
        
        <div class="content">
            <div class="input-section">
                <h3>üìù Text Input for Analysis</h3>
                <textarea id="textInput" placeholder="Enter text to analyze for authenticity using EchoScan's enhanced mathematical detection..."></textarea>
                <button id="analyzeBtn">üöÄ Analyze with EchoScan</button>
                <div class="loading" id="loading">Analyzing with EchoScan enhanced modules</div>
            </div>
            
            <div class="results-section" id="resultsSection">
                <div class="verdict-display" id="verdictDisplay">
                    <span id="verdictText">Verdict will appear here</span>
                    <div id="confidenceText" style="font-size: 0.8em; margin-top: 10px; opacity: 0.9;"></div>
                </div>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h4>üìä Confidence Band</h4>
                        <div class="progress-bar">
                            <div class="progress-fill" id="confidenceBar"></div>
                        </div>
                        <div id="confidenceValue">0.0</div>
                    </div>
                    
                    <div class="metric-card">
                        <h4>üéØ EchoSense Score</h4>
                        <div class="progress-bar">
                            <div class="progress-fill" id="echosenseBar"></div>
                        </div>
                        <div id="echosenseValue">0.0</div>
                    </div>
                    
                    <div class="metric-card">
                        <h4>üåä ‚àÜS Drift</h4>
                        <div class="progress-bar">
                            <div class="progress-fill" id="deltasBar"></div>
                        </div>
                        <div id="deltasValue">0.0</div>
                    </div>
                    
                    <div class="metric-card">
                        <h4>üó≥Ô∏è Consensus</h4>
                        <div id="consensusDisplay">
                            <span id="consensusValue">Unknown</span>
                            <div id="consensusDetails" style="font-size: 0.9em; margin-top: 5px; color: #666;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3>üìà Analysis Visualizations</h3>
                    <div class="chart-grid">
                        <div class="chart-item">
                            <canvas id="metricsChart" width="400" height="200"></canvas>
                        </div>
                        <div class="chart-item">
                            <canvas id="driftChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
                
                <div id="detailedMetrics" class="alert alert-info">
                    <h4>üî¨ Detailed Analysis Metrics</h4>
                    <div id="metricsDetails">Detailed metrics will appear here...</div>
                </div>
                
                <div id="provenanceInfo" class="alert alert-info">
                    <h4>üîó Provenance Chain</h4>
                    <div id="provenanceDetails">Provenance information will appear here...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let metricsChart = null;
        let driftChart = null;
        
        document.getElementById('analyzeBtn').addEventListener('click', analyzeText);
        
        async function analyzeText() {
            const text = document.getElementById('textInput').value.trim();
            
            if (!text) {
                alert('Please enter some text to analyze.');
                return;
            }
            
            // Show loading state
            document.getElementById('loading').style.display = 'block';
            document.getElementById('analyzeBtn').disabled = true;
            document.getElementById('resultsSection').style.display = 'none';
            
            try {
                // Simulate EchoScan API call (in real implementation, this would call your API)
                const result = await simulateEchoScanAnalysis(text);
                displayResults(result);
            } catch (error) {
                console.error('Analysis failed:', error);
                alert('Analysis failed. Please try again.');
            } finally {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('analyzeBtn').disabled = false;
            }
        }
        
        async function simulateEchoScanAnalysis(text) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Simulate enhanced EchoScan results based on text characteristics
            const textLength = text.length;
            const uniqueChars = new Set(text.toLowerCase()).size;
            const complexity = uniqueChars / textLength;
            const hasSpecialChars = /[^a-zA-Z0-9\s]/.test(text);
            const hasRepetition = /(.{3,})\1{2,}/.test(text);
            
            // Simulate consensus voting
            let consensus = "Strong";
            let verdict = "Plausible";
            let confidence = 0.5 + (complexity * 0.3);
            
            if (hasRepetition) {
                consensus = "Ambiguous";
                verdict = "Ambiguous";
                confidence *= 0.6;
            } else if (textLength > 100 && complexity > 0.1) {
                verdict = "Authentic";
                confidence = Math.min(0.95, confidence + 0.2);
            } else if (textLength < 20 || complexity < 0.05) {
                verdict = "Hallucination";
                confidence *= 0.7;
            }
            
            return {
                verdict: verdict,
                confidence_band: Math.round(confidence * 1000) / 1000,
                consensus: consensus,
                echo_sense: 0.4 + (complexity * 0.4),
                delta_s: Math.random() * 0.1,
                intermediate_metrics: {
                    delta_s_variance: Math.random() * 0.001,
                    fold_cosine: 0.3 + (complexity * 0.5),
                    ancestry_depth: Math.floor(textLength / 20) + 1,
                    quirk_count: (text.match(/[^a-zA-Z0-9\s]/g) || []).length,
                    consensus_status: consensus
                },
                drift_metrics: {
                    delta_s: Math.random() * 0.1,
                    variance: Math.random() * 0.001,
                    fold_similarity: 0.3 + (complexity * 0.5)
                },
                quirk_score: hasSpecialChars ? Math.random() * 0.5 : 0,
                provenance: {
                    timestamp: Date.now() / 1000,
                    iso_timestamp: new Date().toISOString(),
                    sha256_signature: 'demo_' + Math.random().toString(36).substr(2, 16)
                }
            };
        }
        
        function displayResults(result) {
            // Show results section
            document.getElementById('resultsSection').style.display = 'block';
            
            // Display verdict
            const verdictDisplay = document.getElementById('verdictDisplay');
            const verdictText = document.getElementById('verdictText');
            const confidenceText = document.getElementById('confidenceText');
            
            verdictText.textContent = result.verdict;
            confidenceText.textContent = `Confidence: ${(result.confidence_band * 100).toFixed(1)}% | Consensus: ${result.consensus}`;
            
            // Style verdict display
            verdictDisplay.className = 'verdict-display';
            if (result.verdict === 'Authentic') {
                verdictDisplay.classList.add('verdict-authentic');
            } else if (result.verdict === 'Ambiguous') {
                verdictDisplay.classList.add('verdict-ambiguous');
            } else {
                verdictDisplay.classList.add('verdict-hallucination');
            }
            
            // Update progress bars
            updateProgressBar('confidenceBar', 'confidenceValue', result.confidence_band, 1.0);
            updateProgressBar('echosenseBar', 'echosenseValue', result.echo_sense, 1.0);
            updateProgressBar('deltasBar', 'deltasValue', result.delta_s, 0.1);
            
            // Update consensus display
            document.getElementById('consensusValue').textContent = result.consensus;
            document.getElementById('consensusDetails').textContent = 
                `Consensus Status: ${result.intermediate_metrics.consensus_status}`;
            
            // Display detailed metrics
            const metricsDetails = document.getElementById('metricsDetails');
            metricsDetails.innerHTML = `
                <strong>‚àÜS Variance:</strong> ${result.intermediate_metrics.delta_s_variance.toFixed(6)}<br>
                <strong>Fold Cosine:</strong> ${result.intermediate_metrics.fold_cosine.toFixed(6)}<br>
                <strong>Ancestry Depth:</strong> ${result.intermediate_metrics.ancestry_depth}<br>
                <strong>Quirk Count:</strong> ${result.intermediate_metrics.quirk_count}<br>
                <strong>Quirk Score:</strong> ${result.quirk_score.toFixed(3)}
            `;
            
            // Display provenance
            const provenanceDetails = document.getElementById('provenanceDetails');
            provenanceDetails.innerHTML = `
                <strong>Timestamp:</strong> ${result.provenance.iso_timestamp}<br>
                <strong>SHA256 Signature:</strong> ${result.provenance.sha256_signature}<br>
                <strong>Analysis ID:</strong> demo_${Math.random().toString(36).substr(2, 8)}
            `;
            
            // Create charts
            createMetricsChart(result);
            createDriftChart(result);
        }
        
        function updateProgressBar(barId, valueId, value, maxValue) {
            const percentage = Math.min((value / maxValue) * 100, 100);
            const bar = document.getElementById(barId);
            const valueElement = document.getElementById(valueId);
            
            // Set width
            bar.style.width = percentage + '%';
            
            // Set color based on value
            bar.className = 'progress-fill';
            if (percentage >= 70) {
                bar.classList.add('progress-high');
            } else if (percentage >= 40) {
                bar.classList.add('progress-medium');
            } else {
                bar.classList.add('progress-low');
            }
            
            valueElement.textContent = value.toFixed(3) + ' / ' + maxValue.toFixed(1);
        }
        
        function createMetricsChart(result) {
            const ctx = document.getElementById('metricsChart').getContext('2d');
            
            if (metricsChart) {
                metricsChart.destroy();
            }
            
            metricsChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Confidence', 'EchoSense', 'Fold Cosine', 'Ancestry', 'Quirk Score'],
                    datasets: [{
                        label: 'Analysis Metrics',
                        data: [
                            result.confidence_band,
                            result.echo_sense,
                            result.intermediate_metrics.fold_cosine,
                            result.intermediate_metrics.ancestry_depth / 10, // Normalize
                            result.quirk_score
                        ],
                        backgroundColor: 'rgba(52, 152, 219, 0.2)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        pointBackgroundColor: 'rgba(52, 152, 219, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(52, 152, 219, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Analysis Metrics Overview'
                        }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 1
                        }
                    }
                }
            });
        }
        
        function createDriftChart(result) {
            const ctx = document.getElementById('driftChart').getContext('2d');
            
            if (driftChart) {
                driftChart.destroy();
            }
            
            // Simulate drift over time data
            const driftData = [];
            for (let i = 0; i < 10; i++) {
                driftData.push(result.delta_s * (0.8 + Math.random() * 0.4));
            }
            
            driftChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 10}, (_, i) => `T${i+1}`),
                    datasets: [{
                        label: '‚àÜS Drift Over Time',
                        data: driftData,
                        borderColor: 'rgba(231, 76, 60, 1)',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Drift Pattern Analysis'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '‚àÜS Value'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Analysis Window'
                            }
                        }
                    }
                }
            });
        }
        
        // Demo text examples
        const demoTexts = [
            "This is a natural human-written text with varied vocabulary and authentic expression patterns.",
            "AAAAA BBBBB CCCCC DDDDD EEEEE FFFFF GGGGG HHHHH IIIII",
            "The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet and demonstrates natural language patterns.",
            "Lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
        ];
        
        // Add demo text selector
        window.onload = function() {
            const inputArea = document.getElementById('textInput');
            inputArea.placeholder += "\n\nTry these examples:\n‚Ä¢ Natural text\n‚Ä¢ Repetitive pattern\n‚Ä¢ Complex sentence\n‚Ä¢ Lorem ipsum";
        };
    </script>
</body>
</html>